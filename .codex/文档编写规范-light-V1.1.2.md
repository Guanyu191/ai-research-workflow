# 文档编写规范-light-V1.1.2

用途: 让 Codex 在撰写任何文档时，仅对齐我的排版风格 (标点. 空格. 数学公式. 代码块).

读者: 我自己. 与我协作写作或改稿的 AI 工具.

来源: 无. 本文为自定义规范，不引用外部模板.

更新规则: 对该文档编写规范文件的版本号，人为更新则改第二位版本号，AI 更新则改第三位的版本号.

---

## 0. 全局原则

- 目标优先级: 讲清楚 > 读起来顺 > 排版统一 > 形式好看.
- 口吻: 尽量口语化. 以第一视角推进. 少用 "书本腔" 的官样表达.
- 软换行: 正文按自然段落书写，不强制每行长度，不做 80/120 字符硬换行.
- 强调: 优先使用**加粗**，避免频繁使用多级标题制造结构.
- 逻辑链: 允许使用 `->` 表示推理或流程.

---

## 1. 标点与中英混排

### 1.1. 标点规则 (必须)

- 逗号: 统一使用中文逗号 "，".
- 句号: 统一使用英文句号 ".".
- 冒号: 统一使用英文冒号并空格 ": ".
- 引号: 统一使用英文引号 "" (如有必要可用英文单引号 '' ).
- 括号: 统一使用英文括号 ().
- 数学公式内部: 遵循 LaTeX 习惯 (例如英文冒号 ":" 等只在公式里出现).

### 1.2. 空格规则 (必须)

- 中文与英文单词/缩写/变量之间: 一般加空格.
- 英文引号 "" 与英文括号 () 与前后中文/英文之间: 都要留空格.
- 例外: 当引号/括号紧贴标点时，不加空格 (例如右括号后面直接接句号 "." ).

> Yes: 中文 "abc"，and 中文. 中文 -> abc -> 中文.

> No: 中文 "abc"，and中文.中文->abc->中文.

---

## 2. 数学公式与推导排版

### 2.1. 记号规范 (必须)

- 公式: 行内公式用 `$...$`，块级公式用 `$$...$$`. 绝对不能用 `\(...\)` 或 `\[...\]`.
- 矩阵: 粗体大写 $\mathbf{A}$.
- 向量: 粗体小写 $\mathbf{v}_1,\mathbf{x}_k$.
- 分量: 不加粗下标 $x_{k,m}$.
- 转置: 统一写为上标 $^{T}$.

### 2.2. 推导排版原则 (必须)

- 长推导默认使用 align* 连续等式，且默认不编号.
- 每一步为什么成立: 写在等号左侧或推导箭头上，要求简明扼要.
- 推荐写法: 在等式左边用 \text{(...)} 标注推导理由，使读者不需要来回找解释.
- 公式编号: 默认不编号，尽量不要出现 (1)(2) 或 \tag{} 这类编号. 只有当确实需要在文中回引时才编号，且优先使用 \tag{}.
- 回指: 默认用自然语言回指 (例如: 由上一行的等式可得 ... . 把上面的不等式代回去，得到 ... .).

示例 (等式链 + 左侧理由标注):

$$
\begin{align*}
\frac{{\rm d}}{{\rm d}r} \phi_{x, u} (r)
& = \frac{{\rm d}}{{\rm d}r} \left( \frac{1}{d \omega_d r^{d-1}} \int_{|y-x|=r} u(y) \,\text{d}S(y) \right)\\
\text{($z=\frac{y-x}{r}, \, y \mapsto z$)} \quad
& = \frac{{\rm d}}{{\rm d}r} \left( \frac{1}{d \omega_d \cancel{r^{d-1}}} \int_{|z|=1} u(x+zr) \cancel{r^{d-1}} \,{\rm d}S(z) \right)\\
& = \frac{1}{d \omega_d} \int_{|z|=1} \frac{{\rm d}}{{\rm d}r} u(x+zr) \,{\rm d}S(z)\\
\text{($x, z \in \mathbb{R}^d, \, r \in \mathbb{R}$)} \quad
& = \frac{1}{d \omega_d} \int_{|z|=1} z \cdot \nabla u(x+zr) \,{\rm d}S(z)\\
\text{($z=\frac{y-x}{r}, \, z \mapsto y$)} \quad
& = \frac{1}{d \omega_d r^{d-1}} \int_{\partial B(x, r)} \frac{y-x}{r} \cdot \nabla u(y) \,{\rm d}S(y)\\
\text{($\frac{y-x}{r}$ 是单位外法向量)} \quad
& = \frac{1}{d \omega_d r^{d-1}} \int_{\partial B(x, r)} \nu \cdot \nabla u(y) \,{\rm d}S(y)\\
\text{(散度定理)} \quad
& = \frac{1}{d \omega_d r^{d-1}} \int_{B(x, r)} \Delta u(y) \,{\rm d}y.
\end{align*}
$$

示例 (推导链 + 带理由的推导箭头):

$$
\begin{align*}
\xRightarrow{f \text{ is convex}} \quad &
 f(\tau t_1 + (1-\tau) t) \leq \tau f(t_1) + (1-\tau) f(t)\\
\xRightarrow{f(\cdot) = \ln e(\cdot)} \quad &
 \ln e(\tau t_1 + (1-\tau) t) \leq \tau \ln e(t_1) + (1-\tau) \ln e(t)\\
\xRightarrow{} \quad &
 e(\tau t_1 + (1-\tau) t) \leq (e(t_1))^{\tau} (e(t))^{1 - \tau}\\
\xRightarrow{t \to t_2, \, e(t_2)=0} \quad &
 e(\tau t_1 + (1-\tau) t) \leq (e(t_1))^{\tau} \cancel{(e(t))^{1 - \tau}}\\
\xRightarrow{} \quad &
 e(\tau t_1 + (1-\tau) t) \leq 0.
\end{align*}
$$

---

## 3. 代码块与命令行块

### 3.1. 命令行块 (必须)

- 默认单行展示，避免换行导致复制出错.
- 命令过长时: 允许使用反斜杠续行，保证复制后仍可直接执行.

```bash
python run.py --input data.nc --output out.nc --mode fast \
  --start 2025-12-01 --end 2025-12-31
```

### 3.2. 代码块 (必须)

- 贴代码前必须有一句说明: 这段代码要解决什么，对应文中哪一步.
- 代码块必须标注语言.

示例:

```python
# 这段代码用于验证离散化后算子是否满足最大值原理.
import numpy as np
...
```

---

## 4. 提示块 (blockquote)

- 需要显式对比. 给出结论. 或补齐前置知识时: 使用 blockquote.
- 推荐前缀: `Yes`、`No`、`Note` (按内容选择).

> Yes: ... .

> No: ... .

> Note: ... .

---

## 5. 自查清单

- 标点是否统一: 逗号 "，". 句号 ".". 冒号 ": ". 引号 "". 括号 ().
- 中英混排是否按规则留空格，尤其是 "" 与 () 两侧.
- 公式是否默认用 align* 且不编号，且关键步骤是否写了左侧理由.
- 命令行是否可复制执行，代码块是否标注语言且有一句用途说明.

---

## 6. 其他补充

- 所有的回复内容、文档记录的根本目的必须是 "教会读者"，而不是展示学术水平.
- 文档中的前置知识，不默认读者会. 需要补齐时，优先用 `> Note: ...`.
- 推导过程中不省略关键步骤，让读者能复现解题路径.
- 统一使用 **加粗前缀** 标记关键内容，而不是使用额外标题层级.
- 推荐前缀集合:
  - **定义:** ...
  - **定理:** ...
  - **引理:** ...
  - **证明:** ...
  - **例子:** ...
  - **推论:** ...
